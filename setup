#/bin/bash
dir="$HOME/.local/src"

if [ -d $dir ] ; then
cd "$dir"
wget https://github.com/Tearran/lkars/archive/refs/tags/v0.1.1.zip ; unzip "$dir/v0.1.1.zip" ; mv "$dir/lkars-0.1.1" "$dir/lkars"
else
mkdir $dir
cd $dir
wget https://github.com/Tearran/lkars/archive/refs/tags/v0.1.1.zip ; unzip "$dir/v0.1.1.zip" ; mv "$dir/lkars-0.1.1" "$dir/lkars"
fi
chmod +x "$dir/lkars/lkars-config"
bash "$dir/lkars/lkars-config"

# Set lkars path
if grep -q -F 'PATH="$HOME/.local/src/lkars:$PATH"' "$HOME/.profile"; then
  echo "LKARS PATH is already set in $HOME/.profile"
else
  echo 'if [ -d "$HOME/.local/src/lkars" ] ; then
  PATH="$HOME/.local/src/lkars:$PATH"
fi' >> "$HOME/.profile"
  echo "LKARS PATH has been added to $HOME/.profile"
  echo "Please reboot to complete the installation"
fi

# Prompt the user with a "yes/no" question using whiptail
if whiptail --yesno "Setup complete. Would you like to reboot now?" 8 78; then
  # If the user selects "yes", reboot the system using sudo
  sudo reboot
else
  # If the user selects "no", display a message indicating that the system will not be rebooted
  whiptail --msgbox "Remember to reboot the system when you're ready." 8 78
fi
